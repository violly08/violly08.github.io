// 
/*

Software Copyright License Agreement (BSD License)

Copyright (c) 2011, Yahoo! Inc.

Copyright (c) 2011-2012, Log-Normal, Inc.

Copyright (c) 2012-2017, SOASTA, Inc.

Copyright (c) 2017-2019, Akamai Technologies, Inc.

All rights reserved.

Redistribution and use of this software in source and binary forms,

with or without modification, are permitted provided that the following

conditions are met:

Redistributions of source code must retain the above

copyright notice, this list of conditions and the

following disclaimer.

Redistributions in binary form must reproduce the above

copyright notice, this list of conditions and the

following disclaimer in the documentation and/or other

materials provided with the distribution.

Neither the name of Yahoo! Inc. nor the names of its

contributors may be used to endorse or promote products

derived from this software without specific prior

written permission of Yahoo! Inc.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS

IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED

TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A

PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT

OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,

SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT

LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,

DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY

THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT

(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE

OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/
'use strict';!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const n={env:"production"};var o={beaconUrl:"https://localhost:8080/beacon"};var s={r:void 0,autorun:!0,onloadfired:!1};var r={BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3,DEBUG:!1};const a=t=>"[object Array]"===Object.prototype.toString.call(t),l=()=>{return!(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&window&&window.MutationObserver&&"function"==typeof window.MutationObserver},c=()=>{try{if(window)return"performance"in window&&window.performance?window.performance:window.msPerformance||window.webkitPerformance||window.mozPerformance}catch(t){}};var d={isArray:a,inArray:(t,e)=>{var i;if(void 0===t||void 0===e||!e.length)return!1;for(i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},cleanupURL:(t,e)=>{if(!t||a(t))return"";if(void 0!==e&&t&&t.length>e){var i=t.indexOf("?");t=-1!==i&&i<e?t.substr(0,i)+"?...":t.substr(0,e-3)+"..."}return t},generateId:t=>"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,t||40).replace(/x/g,function(t){return"0"===(t=(Math.random()||.01).toString(36))?"0":t.substr(2,1)}),isObjectEmpty:t=>{for(let e in t)if(t[e])return!1;return!0},serializeForUrl:t=>window.JSON?JSON.stringify(t):"",isNative:t=>!!t&&t.toString&&!t.toString&&/\[native code\]/.test(String(t)),windowHeight:()=>window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,windowWidth:()=>window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,scroll:()=>{const t=void 0!==window.pageXOffset,e="CSS1Compat"===(window.document.compatMode||""),i={x:0,y:0};return t?"function"==typeof window.pageXOffset?(i.x=window.pageXOffset(),i.y=window.pageYOffset()):(i.x=window.pageXOffset,i.y=window.pageYOffset):e?(i.x=window.document.documentElement.scrollLeft,i.y=window.document.documentElement.scrollTop):(i.x=window.document.body.scrollLeft,i.y=window.document.body.scrollTop),"number"==typeof i.sx&&(i.sx=Math.round(i.sx)),"number"==typeof i.sy&&(i.sy=Math.round(i.sy)),i},isMutationObserverSupported:l,addObserver:(t,e,i,n,o,s)=>{let r,a,c={observer:null,timer:null};if(!l()||!n||!t)return null;function d(t){let e=!1;c.timer&&(clearTimeout(c.timer),c.timer=null),n&&((e=n.call(s,t,o))||(n=null)),!e&&c.observer&&(c.observer.disconnect(),c.observer=null),"number"==typeof e&&e>0&&(c.timer=setTimeout(d,e))}return r=window.MutationObserver,window.Zone&&"function"==typeof window.Zone.__symbol__&&(a=window.Zone.__symbol__("MutationObserver"))&&"string"==typeof a&&window[a]&&"function"==typeof window[a]&&(r=window[a]),c.observer=new r(d),i&&(c.timer=setTimeout(d,c.timeout)),c.observer.observe(t,e),c},hasBrowserOnloadFired:()=>{const t=c();return document.readyState&&"complete"===document.readyState||t&&t.timing&&t.timing.loadEventStart>0},getPerformance:c};const h={"c.b":"Page Busy percentage (Base-10)","c.c.r":"Rage click count (Base-10)","c.c":"Click count (Base-10)","c.cls":"Cumulative Layout Shift score (since last beacon) (Base-10 fraction)","c.e":"Continuity Epoch timestamp (when everything started measuring) (Base-36)","c.f.d":"Frame Rate duration (how long it has been measuring) (milliseconds) (Base-10)","c.f.l":"Number of Long Frames (>= 50ms) (Base-10)","c.f.m":"Minimum Frame Rate (Base-10) per `COLLECTION_INTERVAL`","c.f.s":"Frame Rate measurement start timestamp (Base-36)","c.f":"Average Frame Rate over the Frame Rate Duration (Base-10)","c.fid":"First Input Delay (milliseconds) (Base-10)","c.i.a":"Average interaction delay (milliseconds) (Base-10)","c.i.dc":"Delayed interaction count (Base-10)","c.i.dt":"Delayed interaction time (milliseconds) (Base-10)","c.k.e":"Keyboard ESC count (Base-10)","c.k":"Keyboard event count (Base-10)","c.l":"Log (compressed)","c.lb":"Last Beacon timestamp (Base-36)","c.lt.n":"Number of Long Tasks (Base-10)","c.lt.tt":"Total duration of Long Tasks (milliseconds) (Base-10)","c.lt":"Long Task data (compressed)","c.m.n":"Mouse movement pixels (Base-10)","c.m.p":"Mouse movement percentage (Base-10)","c.s.d":"Distinct scrolls (scrolls that happen 2 seconds after the last) (Base-10)","c.s.p":"Scroll percentage (Base-10)","c.s.y":"Scroll y (pixels) (Base-10)","c.s":"Scroll count (Base-10)","c.t.click":"Click timeline (compressed)","c.t.domln":"DOM Length timeline (compressed)","c.t.domsz":"DOM Size timeline (compressed)","c.t.fps":"Frame Rate timeline (compressed)","c.t.inter":"Interactions timeline (compressed)","c.t.interdly":"Delayed Interactions timeline (compressed)","c.t.key":"Keyboard press timeline (compressed)","c.t.longtask":"LongTask timeline (compressed)","c.t.mem":"Memory usage timeline (compressed)","c.t.mouse":"Mouse movements timeline (compressed)","c.t.mousepct":"Mouse movement percentage (of full screen) timeline (compressed)","c.t.scroll":"Scroll timeline (compressed)","c.t.scrollpct":"Scroll percentage (of full page) timeline (compressed)","c.t.mut":" DOM Mutations timeline (compressed)","c.ttfi":"Time to First Interaction (milliseconds) (Base-10)","c.tti.fr":"Framework Ready (milliseconds) (Base-10)","c.tti.hi":"Hero Images ready (milliseconds) (Base-10)","c.tti.m":"Time to Interactive Method (`lt`, `raf`, `b`)","c.tti.vr":"Visually Ready (milliseconds) (Base-10)","c.tti":"Time to Interactive (milliseconds) (Base-10)","et.fid":"First Input Delay (milliseconds) (Base-10)","pt.fp":"first-paint in DOMHighResTimestamp","pt.fcp":"first-contentful-paint in DOMHighResTimestamp","pt.lcp":"largest-contentful-paint in DOMHighResTimestamp","pt.hid":"The document was loaded hidden (at some point), so FP and FCP are user-driven events, and thus won't be added to the beacon",v:"Bolt version",sv:"Bolt Loader Snippet version",sm:"Bolt Loader Snippet method",u:"The page's URL (for most beacons), or the XMLHttpRequest URL",n:"The beacon number",pgu:"The page's URL (for XMLHttpRequest beacons)",pid:"Page ID (8 characters)",r:"Navigation referrer (from document.location)","vis.pre":"1 if the page transitioned from prerender to visible","vis.st":"Document's visibility state when beacon was sent","vis.lh":"Timestamp when page was last hidden","vis.lv":"Timestamp when page was last visible","xhr.pg":"The XMLHttpRequest page group",errors:"Error messages of errors detected in Bolt code, separated by a newline","rt.si":"Session ID","rt.ss":"Session start timestamp","rt.sl":"Session length (number of pages), can be increased by XHR beacons as well","ua.plt":"navigator.platform","ua.vnd":"navigator.vendor","c.expndlg":"Log (Decompressed)","c.expndta":"Expanded Timeline Data","c.expndlt":"Expanded Long Task Data","c.load":"Load event duration - start navigation to event fired (milliseconds) (Base-10)","c.dcl":"DOMContentLoaded event duration - start navigation to event fired (milliseconds) (Base-10)","c.vls":"Vice Loading Stage (possible values: 0/1)","c.vo":"Vice On - weather vice should be loaded or not (possible values: 0/1)","c.ttfb":"Page's HTML time to first byte in milliseconds"},u=t=>h[t];var m={expand:u,expandBeacon:t=>{const e={};return Object.entries(t).forEach(([t,i])=>{let n=u(t);n?e[n=`"${t}" / ${n}`]=i:e[t]=i}),e},isKeyExist:t=>h[t]};class g{static excludeDataByKeys(t,e){const i=new Set(e);return g.filterObject(t,(t,e)=>!i.has(e)||!m.isKeyExist(e))}static includeDataByKeys(t,e){let i=e instanceof Array,n=i?e:Object.keys(e);const o=new Set(n);let s=g.filterObject(t,(t,e)=>o.has(e)&&m.isKeyExist(e));return i||(s=g.convertKeys(s,e)),s}static filterObject(t,e){return Object.fromEntries(Object.entries(t).filter(([t,i])=>e(i,t)))}static convertKeys(t,e){let i={},n=Object.keys(t);for(let o of n)if(e[o]){i[e[o]]=t[o]}return i}}var p=g;class v{constructor({beaconUrl:t,beaconUrlsAllowed:e=[],beaconUrlForceHttps:i=!1,beaconType:n="GET",beaconAuthToken:o,beaconAuthKey:s,beaconDisableSendBeacon:r=!1,beaconWithCredentials:a=!1,beaconFilterIncludeData:l=null,beaconFilterExcludeData:c=[]}){this.beaconQueued=!1,this.beaconsSent=0,this.hasSentPageLoadBeacon=!1,this.beaconUrl=t,this.beaconUrlsAllowed=e,this.beaconUrlForceHttps=i,this.beaconType=n,this.beaconAuthToken=o,this.beaconAuthKey=s,this.beaconDisableSendBeacon=r,this.beaconWithCredentials=a,this.beaconFilterExcludeData=c,this.beaconFilterIncludeData=l}addToBeacon(t,e,i){0!==e&&void 0!==e||i?v.Bolt.variableManager.addVar(t,e,!0):v.Bolt.variableManager.removeVar(t)}realSendBeacon(){let t,e=[],i={};if(!this.beaconQueued)return!1;const n=v.Bolt.variableManager;this.beaconQueued=!1;const o=v.Bolt.pluginManager.getPlugins();for(t in o){if(!o[t].isComplete())return!1}if(!(window&&window.Image&&window.navigator&&v.Bolt.window))return console.warn("DOM not fully available, not sending a beacon"),!1;const r=d.inArray(n.getVar("http.initiator"),v.Bolt.CONSTANTS.BEACON_TYPE_SPAS),a=void 0===n.getVar("http.initiator")||r;if(!n.getVar("pgu")){const t=r?v.Bolt.document.URL:v.Bolt.document.URL.replace(/#.*/,"");n.setVar("pgu",t)}n.setVar("pgu",d.cleanupURL(v.Bolt.variableManager.getVar("pgu"))),n.getVar("u")&&!r||n.setVar("u",v.Bolt.variableManager.getVar("pgu")),n.getVar("pgu")===v.Bolt.variableManager.getVar("u")&&n.removeVar("pgu"),s.r?n.setVar("r",d.cleanupURL(s.r)):n.removeVar("r"),n.setVar("v",v.Bolt.version),v.Bolt.snippetVersion&&n.setVar("sv",v.Bolt.snippetVersion),n.setVar("sm",v.Bolt.snippetMethod||"i");const l=v.Bolt.eventManager;v.Bolt.visibilityState()&&(n.setVar("vis.st",v.Bolt.visibilityState()),l.getLastVisibilityEvent().visible&&n.setVar("vis.lv",v.Bolt.now()-l.getLastVisibilityEvent().visible),l.getLastVisibilityEvent().hidden&&n.setVar("vis.lh",v.Bolt.now()-l.getLastVisibilityEvent().hidden)),n.setVar("ua.plt",navigator.platform),n.setVar("ua.vnd",navigator.vendor),v.Bolt.pageId&&n.setVar("pid",v.Bolt.pageId),n.setVar("n",++this.beaconsSent),v.Bolt.window!==window&&n.setVar("if","");const c=v.Bolt.errorManager,h=c.getErrors();for(t in h)h[t]&&e.push(t+(h[t]>1?" (*"+h[t]+")":""));e.length>0&&n.setVar("errors",e.join("\n")),c.clearErrors(),l.fireEvent("before_beacon",n.getVars());const u=n.getVars();for(t in u)u[t]&&(i[t]=u[t]);if(n.removeVar(["qt","pgu"]),void 0===n.getVar("early")){const t=n.getSingleBeaconVars();for(let e in t)t[e]&&n.removeVar(e);n.clearSingleBeaconVars(),!this.hasSentPageLoadBeacon&&a&&(this.hasSentPageLoadBeacon=!0,v.Bolt.setImmediate(function(){l.fireEvent("page_load_beacon",i)}))}return this.beaconInQueue=!1,this.sendBeaconData(i),!0}beaconUrlAllowed(t){if(!this.beaconUrlsAllowed||0===this.beaconUrlsAllowed.length)return!0;for(let e=0;e<this.beaconUrlsAllowed.length;e++){if(new RegExp(this.beaconUrlsAllowed[e]).exec(t))return!0}return!1}sendBeacon(t){return t&&(this.beaconUrlOverride=t),this.beaconQueued||(this.beaconQueued=!0,v.Bolt.setImmediate(this.realSendBeacon,null,null,this)),!0}sendBeaconWhenReady(t,e,i){if(this.beaconInQueue)v.Bolt.eventManager.subscribe("beacon",()=>{this.sendBeaconWhenReady(t,e,i)},null,this,!0);else{this.beaconInQueue=!0;for(let e in t)t[e]&&v.Bolt.variableManager.addVar(e,t[e],!0);"function"==typeof e&&void 0!==i&&e.apply(i),this.sendBeacon()}}sendBeaconData(t){if(r.DEBUG&&console.log(m.expandBeacon(t)),this.beaconUrl=this.beaconUrlOverride||this.beaconUrl,!this.beaconUrl)return!1;if(!this.beaconUrlAllowed(this.beaconUrl))return!1;if(d.isObjectEmpty(t))return!1;const e=v.Bolt.eventManager;let i=null;this.beaconFilterIncludeData?i=p.includeDataByKeys(t,this.beaconFilterIncludeData):this.beaconFilterExcludeData&&(i=p.excludeDataByKeys(t,this.beaconFilterExcludeData)),r.DEBUG&&console.log(i||t),e.fireEvent("beacon",i||t),e.dispatchEvent("BOLT_DATA",i||t)}setBeaconFilterIncludeData(t){this.beaconFilterIncludeData=t}setBeaconFilterExcludeData(t){this.beaconFilterExcludeData=t}}var M=v;class f{static supportsPassive(){if(void 0===f.results.supportsPassive){if(f.results.supportsPassive=!1,!Object.defineProperty)return!1;try{const t=Object.defineProperty({},"passive",{get:function(){return f.results.supportsPassive=!0}});window.addEventListener("test",null,t)}catch(t){}}return f.results.supportsPassive}}f.results={};var b=f;class T{constructor(){this.lastVisibilityEvent={},this.events={},this.listenerCallbacks={},this.translateEvents={onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},this.publicEvents={before_beacon:"onBeforeBoltBeacon",beacon:"onBoltBeacon",onBoltLoaded:"onBoltLoaded"},this.unloadEventsCount=0,this.unloadEventCalled=0,this.setupCreateCustomEvent()}setupCreateCustomEvent(){try{void 0!==new window.CustomEvent("CustomEvent")&&(this.createCustomEvent=((t,e)=>new window.CustomEvent(t,e)))}catch(t){}try{!this.createCustomEvent&&document.createEvent&&document.createEvent("CustomEvent")&&(this.createCustomEvent=((t,e)=>{const i=document.createEvent("CustomEvent");return e=e||{cancelable:!1,bubbles:!1},i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}))}catch(t){}!this.createCustomEvent&&document.createEventObject&&(this.createCustomEvent=((t,e)=>{const i=document.createEventObject();return i.type=i.propertyName=t,i.detail=e.detail,i})),this.createCustomEvent||(this.createCustomEvent=(()=>{}))}getLastVisibilityEvent(){return this.lastVisibilityEvent}registerEvent(t){return this.events[t]?this:(this.events[t]=[],this)}disable(){this._clearEvents(),this._clearListeners()}createCustomEvent(){}dispatchEvent(t,e,i){const n=this.createCustomEvent(t,{detail:e});function o(){try{document.dispatchEvent?document.dispatchEvent(n):document.fireEvent&&document.fireEvent("onpropertychange",n)}catch(e){console.error("Error when dispatching "+t)}}n&&(i?T.Bolt.setImmediate(o):o())}fireEvent(t,e){let i,n,o,s;if(t=t.toLowerCase(),this.translateEvents[t]&&(t=this.translateEvents[t]),this.events[t]){for(this.publicEvents[t]&&this.dispatchEvent(this.publicEvents[t],e),o=this.events[t],"before_beacon"!==t&&"beacon"!==t&&"before_early_beacon"!==t&&T.Bolt.beaconManager.realSendBeacon(),s=o.length,i=0;i<s;i++)(n=o[i]).fn.call(n.scope,e,n.cb_data);for(i=0;i<s;i++)o[i].once&&(o.splice(i,1),s--,i--)}}subscribe(t,e,i,n,o){let r,a;t=t.toLowerCase(),this.translateEvents[t]&&(t=this.translateEvents[t]),this.events[t]||(this.events[t]=[]),a=this.events[t];for(let t=0;t<a.length;t++)if((r=a[t])&&r.fn===e&&r.cb_data===i&&r.scope===n)return this;if(a.push({fn:e,cb_data:i||{},scope:n||null,once:o||!1}),"page_ready"===t&&s.onloadfired&&s.autorun&&T.Bolt.setImmediate(e,null,i,n),"page_unload"===t||"before_unload"===t){this.unloadEventsCount++;const o=t=>{e&&e.call(n,t||window.event,i),++this.unloadEventCalled===this.unloadEventsCount&&T.Bolt.beaconManager.realSendBeacon()};"page_unload"===t&&(T.Bolt.window.onpagehide||null===T.Bolt.window.onpagehide?T.Bolt.eventManager.addListener(T.Bolt.window,"pagehide",o):T.Bolt.eventManager.addListener(T.Bolt.window,"unload",o)),T.Bolt.eventManager.addListener(T.Bolt.window,"beforeunload",o)}return this}addListener(t,e,i,n){let o=!1;t.addEventListener?("object"==typeof n?o=n:"boolean"==typeof n&&n&&b.supportsPassive()&&(o={capture:!1,passive:!0}),t.addEventListener(e,i,o)):t.attachEvent&&t.attachEvent("on"+e,i),this.listenerCallbacks[e]=this.listenerCallbacks[e]||[],this.listenerCallbacks[e].push({el:t,fn:i})}removeListener(t,e,i){if(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i),this.listenerCallbacks[e])for(let n=0;n<this.listenerCallbacks[e].length;n++)if(i===this.listenerCallbacks[e][n].fn&&t===this.listenerCallbacks[e][n].el)return void this.listenerCallbacks[e].splice(n,1)}_clearEvents(){for(let t in this.events)this.events[t]&&(this.events[t]=[])}_clearListeners(){for(let t in this.listenerCallbacks)if(this.listenerCallbacks[t])for(;this.listenerCallbacks[t].length;)this.removeListener(this.listenerCallbacks[t][0].el,t,this.listenerCallbacks[t][0].fn);this.listenerCallbacks={}}}var w=T;class E{static attachPageReady(t){return d.hasBrowserOnloadFired()?E.Bolt.setImmediate(t,null,null,E.Bolt):window.onpagehide||null===window.onpagehide?E.Bolt.eventManager.addListener(window,"pageshow",t):E.Bolt.eventManager.addListener(window,"load",t)}static pageReady(t,e){let i;if(e||"number"!=typeof t||(i=t,t=null),t||(t=window.event),t||(t={name:"load"}),!e){t.timing=t.timing||{},t.timing.loadEventEnd=i||E.Bolt.now(),E.Bolt.variableManager.addVar("pr",1,!0)}s.onloadfired||(E.Bolt.eventManager.fireEvent("page_ready",t),s.onloadfired=!0)}}var y=E;var S=class{constructor(){this.plugins={}}getPlugins(){return this.plugins}registerPlugin(t,e){this.plugins[t]=e}getPlugin(t){return this.plugins[t]}erasePlugin(t){delete this.plugins[t]}};var O=class{constructor(){this.vars={},this.singleBeaconVars={},this.varPriority={}}getVars(){return this.vars}getSingleBeaconVars(){return this.singleBeaconVars}addVar(t,e,i){if("string"==typeof t)this.vars[t]=e,i&&(this.singleBeaconVars[t]=1);else if("object"==typeof t){const e=t;for(const t in e)e[t]&&(this.vars[t]=e[t],i&&(this.singleBeaconVars[t]=1))}return this}appendVar(t,e){let i=this.getVar(t)||"";return i&&(i+=","),this.addVar(t,i+e),this}removeVar(t){let e;if(!arguments.length)return this;e=1===arguments.length&&d.isArray(t)?t:arguments;for(let t=0;t<e.length;t++)this.vars[e[t]]&&delete this.vars[e[t]];return this}hasVar(t){return this.vars[t]}getVar(t){return this.vars[t]}setVar(t,e){this.vars[t]=e}setVarPriority(t,e){return"number"!=typeof e||1!==Math.abs(e)?this:(this.varPriority[e][t]=1,this)}getUriEncodedVar(t,e){return void 0!==e&&null!==e||(e=""),"object"==typeof e&&(e=d.serializeForUrl(e)),encodeURIComponent(t)+"="+encodeURIComponent(e)}getVarsOfPriority(t,e){let i=[],n=0!==e?this.varPriority[e]:t;for(let o in n)n[o]&&t[o]&&(i.push(this.getUriEncodedVar(o,void 0===t[o]?"":t[o])),0!==e&&delete t[o]);return i}clearVars(){this.vars={}}clearSingleBeaconVars(){this.singleBeaconVars={}}};class L{constructor(){this.errors={}}addError(t,e,i){let n;"string"!=typeof t&&((n=String(t)).match(/^\[object/)&&(n=t.name+": "+(t.description||t.message).replace(/\r\n$/,"")),t=n),void 0!==e&&(t="["+e+":"+L.Bolt.now()+"] "+t),i&&(t+=":: "+i),this.errors[t]?this.errors[t]++:this.errors[t]=1}getErrors(){return this.errors}clearErrors(){this.errors={}}}var _=L;class B{static injectMany(t,e,i){e.forEach(e=>B.inject(t,e,i))}static inject(t,e,i){e[t]=i}}var I=B;class P{constructor(){return y.attachPageReady(()=>{setTimeout(()=>{this.getPerformanceResourceTiming()},5e3)}),this}getPerformanceResourceTiming(){if(!this.isSupported())return;const t=d.getPerformance();t.setResourceTimingBufferSize(500);const e=t.getEntriesByType("resource").filter(t=>"script"===t.initiatorType).map(t=>{const e={cs:Math.ceil(t.connectStart,!0),dbs:t.decodedBodySize,dle:Math.ceil(t.domainLookupEnd,!0),dls:Math.ceil(t.domainLookupStart,!0),ebs:t.encodedBodySize,et:t.entryType,fs:Math.ceil(t.fetchStart,!0),it:t.initiatorType,n:d.serializeForUrl(t.name,!0),nhp:t.nextHopProtocol,rde:Math.ceil(t.redirectEnd,!0),d:Math.ceil(t.duration,!0),rds:Math.ceil(t.redirectStart,!0),rqs:Math.ceil(t.requestStart,!0),rse:Math.ceil(t.responseEnd,!0),scs:Math.ceil(t.secureConnectionStart,!0),strt:Math.ceil(t.startTime,!0),ts:t.transferSize,ws:Math.ceil(t.workerStart,!0),ce:Math.ceil(t.connectEnd,!0)};return Object.entries(e).forEach(([t,i])=>{0===i&&delete e[t]}),e});P.Bolt.eventManager.dispatchEvent("BOLT_NETWORK",e)}isSupported(){let t=d.getPerformance();return t&&t.getEntries}}var R=P;class C{static init({beaconFilterData:t,environment:e}){if(t){const{includeDataByKeys:e,excludeDataByKeys:i}=t;e?C.beaconManager.setBeaconFilterIncludeData(e):i&&C.beaconManager.setBeaconFilterExcludeData(i)}C.environment=e,y.attachPageReady(C.pageReadyAutoRun)}static pageReadyAutoRun(t){s.autorun&&y.pageReady(t,!0)}static getPerformance(){try{if(C.window)return"performance"in C.window&&C.window.performance?C.window.performance:C.window.msPerformance||C.window.webkitPerformance||C.window.mozPerformance}catch(t){}}static setup(){I.injectMany("Bolt",[M,w,_,y,R],C),C._setupNowFunction(),C._setupVisibilityState(),C._setupFrame(),C.network||(C.network=new R)}static _setupFrame(){const t=C.document.createElement("iframe");return t.src="about:blank",t.setAttribute("style","visibility: hidden;position: absolute;height: 0px; width: 0px"),t.width=0,t.height=0,C.document.head.appendChild(t),t.contentWindow}static _setupNowFunction(){const t=this.getPerformance();try{t&&"function"==typeof t.now&&/\[native code\]/.test(String(t.now))&&t.timing&&t.timing.navigationStart&&(C.now=function(){return Math.round(t.now()+t.timing.navigationStart)})}catch(t){}}static _setupVisibilityState(){void 0!==C.document.hidden?(C.visibilityStateKey="visibilityState",C.visibilityChangeKey="visibilitychange"):void 0!==C.document.mozHidden?(C.visibilityStateKey="mozVisibilityState",C.visibilityChangeKey="mozvisibilitychange"):void 0!==C.document.msHidden?(C.visibilityStateKey="msVisibilityState",C.visibilityChangeKey="msvisibilitychange"):void 0!==C.document.webkitHidden&&(C.visibilityStateKey="webkitVisibilityState",C.visibilityChangeKey="webkitvisibilitychange")}static now(){return Date.now()||(new Date).getTime()}static visibilityState(){return void 0===C.visibilityStateKey?"visible":C.document[C.visibilityStateKey]}static setImmediate(t,e,i,n){let o;o=function(){t.call(n||null,e,i||{},void 0),o=null},C.window.requestIdleCallback?C.window.requestIdleCallback(o,{timeout:1e3}):C.window.setImmediate?C.window.setImmediate(o):setTimeout(o,10)}static hrNow(){let t,e=C.getPerformance();return e&&e.now?t=e.now():console.warn("Need RT plugin!"),t}}C.window=window,C.document=window.document,C.frame=C._setupFrame(),C.CONSTANTS=r,C.pluginManager=new S,C.variableManager=new O,C.eventManager=new w,C.errorManager=new _,C.network=null,C.page=y,C.beaconManager=new M(o),C.version="1.0.3.1",C.pageId=d.generateId(8);var A=C;var x={EVENT_TYPES:{click:0,dblclick:1,mousedown:2,mouseup:3,mousemove:4,touchstart:5,touchend:6,touchmove:7,keydown:8,keyup:9,keypress:10,wheel:11,pointerdown:12,pointerup:13,pointermove:14,compositionstart:17,compositionupdate:18,compositionend:19,contextmenu:20}};let N=[],D=null,V=null;var k={initialized:!1,supported:null,observerEvent:null,observerFirstInput:null,entries:N,firstInputDelay:D,timeToFirstInteraction:V,onBeforeBeacon:function(){var t;if(N&&N.length){var e=[];for(t=0;t<N.length;t++)e.push({n:x.EVENT_TYPES[N[t].name]?x.EVENT_TYPES[N[t].name]:N[t].name,s:Math.round(N[t].startTime).toString(36),d:Math.round(N[t].duration).toString(36),p:Math.round(N[t].processingEnd-N[t].processingStart).toString(36),c:N[t].cancelable?1:0,fi:"first-input"===N[t].entryType?1:void 0});A.variableManager.addVar("et.e",d.serializeForUrl(e),!0)}N=[],null!==D&&(A.variableManager.addVar("et.fid",Math.ceil(D),!0),D=null)},onEventTiming:function(t){N=N.concat(t.getEntries())},onFirstInput:function(t){let e=t.getEntries();N=N.concat(e),D=e[0].processingStart-e[0].startTime,V=e[0].startTime}};var F={count:()=>k.entries.length,averageDuration:()=>{if(0===k.entries.length)return 0;for(var t=0,e=0;e<k.entries.length;e++)t+=k.entries[e].duration;return t/k.entries.length},firstInputDelay:()=>k.firstInputDelay,timeToFirstInteraction:()=>k.timeToFirstInteraction};const U=A.getPerformance();var G={COLLECTION_INTERVAL:100,DEFAULT_AFTER_ONLOAD_MAX_LENGTH:6e4,TIME_TO_INTERACTIVE_WAIT_POLL_PERIOD:500,COMPRESS_MODE_SMALL_NUMBERS:0,COMPRESS_MODE_LARGE_NUMBERS:1,COMPRESS_MODE_PERCENT:2,LOG_TYPE_SCROLL:0,LOG_TYPE_CLICK:1,LOG_TYPE_MOUSE:2,LOG_TYPE_KEY:3,LOG_TYPE_VIS:4,LOG_TYPE_ORIENTATION:5,BASE64_NUMBER:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",LARGE_NUMBER_WRAP:".",listenerOpts:{passive:!0,capture:!0},p:U,externalMetrics:Object.assign({},F),epoch:U&&U.timing&&U.timing.navigationStart?U.timing.navigationStart:A.now(),compressJson:t=>window.JSON?JSON.stringify(t):""};var Y={LONG_FRAME_MAX:50};class z{constructor(t,e){this.win=t,this.timeline=e,this.timeline.register("fps",G.COMPRESS_MODE_SMALL_NUMBERS),this.totalFrames=0,this.longFrames=0,this.frameStartTime,this.lastFrame,this.enabled=!0,this._setupFrameStartTime(),t.requestAnimationFrame(this.frame.bind(this)),this.setupExternalMetrics()}setupExternalMetrics(){const t=G.externalMetrics;t.fps=(()=>{const e=t.fpsDuration();if(e)return Math.floor(this.totalFrames/(e/1e3))}),t.fpsDuration=(()=>{if(this.frameStartTime)return A.now()-this.frameStartTime}),t.fpsMinimum=(()=>{if(G.externalMetrics.fpsDuration()){const t=this.timeline.getStats("fps",this.frameStartTime).min;return t!==1/0?t:void 0}}),t.fpsLongFrames=(()=>this.longFrames),t.fpsStart=(()=>this.frameStartTime?this.frameStartTime.toString(36):0)}frame(t){this.enabled&&(t-this.lastFrame>=Y.LONG_FRAME_MAX&&this.longFrames++,this.lastFrame=t,this.totalFrames++,this.timeline.increment("fps"),this.win.requestAnimationFrame(this.frame.bind(this)))}analyze(t){const e=G.externalMetrics;A.beaconManager.addToBeacon("c.f",e.fps()),A.beaconManager.addToBeacon("c.f.d",e.fpsDuration()),A.beaconManager.addToBeacon("c.f.m",e.fpsMinimum()),A.beaconManager.addToBeacon("c.f.l",e.fpsLongFrames()),A.beaconManager.addToBeacon("c.f.s",e.fpsStart())}stop(){this.enabled=!1,this.frameStartTime=0}onBeacon(){this.enabled&&(this.frameStartTime=A.now()),this.totalFrames=0,this.longFrames=0}_setupFrameStartTime(){this.frameStartTime=A.now()}}z.CONSTANTS=Y;var H=z;const K={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!0,monitorLayoutShifts:!0,monitorPageAndDOMMonitor:!0,afterOnload:!1,afterOnloadMaxLength:G.DEFAULT_AFTER_ONLOAD_MAX_LENGTH,afterOnloadMinWait:5e3,waitAfterOnload:7e3,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!0,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,touchStartMonitor:null,mouseDownMonitor:null,pointerDownMonitor:null,statsMonitor:null,layoutShiftMonitor:null,pageAndDOMMonitor:null,monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor","layoutShiftMonitor","pageAndDOMMonitor","touchStartMonitor","mouseDownMonitor","pointerDownMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,isSafari:window&&window.navigator&&window.navigator.vendor&&-1!==window.navigator.vendor.indexOf("Apple"),onBeforeBeacon:function(){K.runAllAnalyzers()},runAllAnalyzers:function(){if(K.hasAddedDataToBeacon)return;const t=K.monitors.length;for(let e=0;e<t;e++){let t=K[K.monitors[e]];t&&"function"==typeof t.analyze&&t.analyze(K.timeOfLastBeacon)}A.beaconManager.addToBeacon("c.lb",K.timeOfLastBeacon?K.timeOfLastBeacon.toString(36):0),K.timeOfLastBeacon=A.now(),K.hasAddedDataToBeacon=!0},onBeacon:function(t){if(!t||!(void 0!==t.early||t["http.initiator"]&&0===t["http.initiator"].indexOf("api_custom_"))){for(let t=0;t<K.monitors.length;t++){const e=K[K.monitors[t]];e&&(K.afterOnload||"function"==typeof e.stop&&e.stop(),"function"==typeof e.onBeacon&&e.onBeacon())}K.hasAddedDataToBeacon=!1}},onXhrLoad:function(t){t&&d.inArray(t.initiator,r.BEACON_TYPE_SPAS)&&(K.isSpa=!0),t&&"spa_hard"===t.initiator&&K.onPageReady()},onPageReady:function(){if(K.firedPageReady=!0,K.afterOnload&&K.monitorInteractions&&(K.afterOnloadMonitoring=!0,K.isSpa||"number"!=typeof K.afterOnloadMaxLength||setTimeout(function(){K.afterOnloadMonitoring=!1},K.afterOnloadMaxLength)),K.waitAfterOnload){const t=A.now();setTimeout(function e(){const i=K.waitAfterOnload;A.now()-t>i&&-1!==i?(K.complete=!0,A.beaconManager.sendBeacon()):(K.timeline.analyze(),G.externalMetrics.timeToInteractive()?(K.complete=!0,A.beaconManager.sendBeacon()):setTimeout(e,G.TIME_TO_INTERACTIVE_WAIT_POLL_PERIOD))},G.TIME_TO_INTERACTIVE_WAIT_POLL_PERIOD)}else K.complete=!0},addToBeacon:function(t,e,i){0!==e&&void 0!==e||i?A.variableManager.addVar(t,e,!0):A.variableManager.removeVar(t)}};var j=K;var X={INTERACTION_MAX_DELAY:50,INTERACTION_MIN_WAIT_FOR_BEACON:0,INTERACTION_MAX_WAIT_FOR_BEACON:3e4};var W=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,this.keyCount=0,this.escKeyCount=0,this.setupExternalMetrics(),this.setupBindings(),A.eventManager.addListener(t.document,"keydown",this.boundOnKeyDown,G.listenerOpts)}setupBindings(){this.boundOnKeyDown=this.onKeyDown.bind(this)}setupExternalMetrics(){G.externalMetrics.keyCount=(()=>this.keyCount),G.externalMetrics.keyEscapes=(()=>this.escKeyCount)}onKeyDown(t){const e=A.now();this.keyCount++,27===t.keyCode&&this.escKeyCount++,this.timeline.increment("key"),this.timeline.log(G.LOG_TYPE_KEY,e),t.cancelable&&this.interactionMonitor.interact("key",e,t)}analyze(t){const e=A.beaconManager;e.addToBeacon("c.k",G.externalMetrics.keyCount()),e.addToBeacon("c.k.e",G.externalMetrics.keyEscapes())}stop(){A.eventManager.removeListener(this.win.document,"keydown",this.boundOnKeyDown)}onBeacon(){this.keyCount=0,this.escKeyCount=0}};var q=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,this.enabled=!0,this.setupBindings(),A.eventManager.addListener(window,"mousedown",this.boundOnMouseDown,G.listenerOpts)}setupBindings(){this.boundOnMouseDown=this.onMouseDown.bind(this)}onMouseDown(t){if(!this.enabled||!t.cancelable)return;const e=A.now();this.interactionMonitor.interact("md",e,t)}stop(){this.enabled=!1,A.eventManager.removeListener(this.win,"mousedown",this.boundOnMouseDown)}};var Q={MIN_LOG_PIXEL_CHANGE:10,REPORT_LOG_INTERVAL:250};var J=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,e.register("mouse",G.COMPRESS_MODE_SMALL_NUMBERS),e.register("mousepct",G.COMPRESS_MODE_PERCENT),this.lastX=0,this.lastY=0,this.lastLogX=0,this.lastLogY=0,this.intervalMousePct=0,this.totalMousePct=0,this.totalMousePixels=0,this.reportMousePctInterval=!1,this.reportMouseLogInterval=!1,this.screenPixels=Math.round(Math.sqrt(Math.pow(d.windowHeight(),2)+Math.pow(d.windowWidth(),2))),this.setupExternalMetrics(),this.setupBindings(),this.reportMousePctInterval=setInterval(this.reportMousePct.bind(this),G.COLLECTION_INTERVAL),this.reportMouseLogInterval=setInterval(this.reportMouseLog.bind(this),G.REPORT_LOG_INTERVAL),A.eventManager.addListener(t.document,"mousemove",this.boundOnMouseMove,G.listenerOpts)}setupBindings(){this.boundOnMouseMove=this.onMouseMove.bind(this)}setupExternalMetrics(){G.externalMetrics.mousePct=(()=>this.totalMousePct),G.externalMetrics.mousePixels=(()=>this.totalMousePixels)}onMouseMove(t){const e=t.clientX,i=t.clientY,n=Math.round(Math.sqrt(Math.pow(this.lastY-i,2)+Math.pow(this.lastX-e,2))),o=Math.round(n/this.screenPixels*100);this.intervalMousePct+=o,this.totalMousePct+=o,this.totalMousePixels+=n,this.lastX=e,this.lastY=i,this.timeline.increment("mouse",n)}reportMousePct(){const t=Math.min(this.intervalMousePct,100);0!==t&&this.timeline.set("mousepct",t),this.intervalMousePct=0}reportMouseLog(){this.lastLogX===this.lastX&&this.lastLogY===this.lastY||Math.round(Math.sqrt(Math.pow(this.lastLogY-this.lastY,2)+Math.pow(this.lastLogX-this.lastX,2)))>=Q.MIN_LOG_PIXEL_CHANGE&&(this.timeline.log(G.LOG_TYPE_MOUSE,A.now(),{x:this.lastX,y:this.lastY}),this.lastLogX=this.lastX,this.lastLogY=this.lastY)}analyze(t){const e=A.beaconManager;e.addToBeacon("c.m.p",G.externalMetrics.mousePct()),e.addToBeacon("c.m.n",G.externalMetrics.mousePixels())}stop(){this.reportMousePctInterval&&(clearInterval(this.reportMousePctInterval),this.reportMousePctInterval=!1),this.reportMouseLogInterval&&(clearInterval(this.reportMouseLogInterval),this.reportMouseLogInterval=!1),A.eventManager.removeListener(this.win.document,"mousemove",this.boundOnMouseMove)}onBeacon(){this.totalMousePct=0,this.totalMousePixels=0}};var $=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,e.register("orn",G.COMPRESS_MODE_SMALL_NUMBERS),this.enabled=!0,this.setupBindings(),A.eventManager.addListener(t,"orientationchange",this.boundOnOrientationChange,G.listenerOpts)}setupBindings(){this.boundOnOrientationChange=this.onOrientationChange.bind(this)}onOrientationChange(t){const e=A.now();let i=window.orientation;if(!this.enabled)return;this.timeline.increment("orn");const n=window.screen&&(screen.orientation||screen.msOrientation||screen.mozOrientation||{});n&&"number"==typeof n.angle&&(i=screen.orientation.angle),"number"==typeof i&&this.timeline.log(G.LOG_TYPE_ORIENTATION,e,{a:i})}stop(){this.enabled=!1,A.eventManager.removeListener(this.win,"orientationchange",this.boundOnOrientationChange)}};var Z=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,this.enabled=!0,this.now=null,this.originalEvent=null,this.setupBindings(),A.eventManager.addListener(t,"pointerdown",this.boundOnPointerDown,G.listenerOpts),A.eventManager.addListener(t,"pointercancel",this.boundStop,G.listenerOpts)}setupBindings(){this.boundOnPointerDown=this.onPointerDown.bind(this),this.boundOnPointerUp=this.onPointerUp.bind(this),this.boundStop=this.stop.bind(this)}onPointerUp(){this.enabled&&(this.interactionMonitor.interact("pd",this.now,this.originalEvent),this.now=null,this.originalEvent=null,A.eventManager.removeListener(this.win,"pointerup",this.boundOnPointerUp))}onPointerDown(t){this.enabled&&t.cancelable&&(this.now=A.now(),this.originalEvent=t,A.eventManager.addListener(this.win,"pointerup",this.boundOnPointerUp,G.listenerOpts))}stop(){this.enabled=!1,A.eventManager.removeListener(this.win,"pointerdown",this.boundOnPointerDown),A.eventManager.removeListener(this.win,"pointerup",this.boundOnPointerUp),A.eventManager.removeListener(this.win,"pointercancel",this.boundStop)}};var tt={DISTINCT_SCROLL_SECONDS:2e3,MIN_SCROLL_Y_CHANGE_FOR_LOG:20};var et=class{constructor(t,e,i){t&&t.document&&t.document.documentElement&&(this.win=t,this.timeline=e,this.interactionMonitor=i,this.lastY=0,this.lastYLogged=0,this.intervalScrollPct=0,this.totalScrollPct=0,this.scrollCount=0,this.scrollPixels=0,this.distinctScrollCount=0,this.lastScroll=0,this.collectionInterval=!1,this.body=t.document.body,this.html=t.document.documentElement,e.register("scroll",G.COMPRESS_MODE_SMALL_NUMBERS),e.register("scrollpct",G.COMPRESS_MODE_PERCENT),this.documentHeight=Math.max(this.body.scrollHeight,this.body.offsetHeight,this.html.clientHeight,this.html.scrollHeight,this.html.offsetHeight)-d.windowHeight(),this.setupExternalMetrics(),this.setupBindings(),A.eventManager.addListener(t,"scroll",this.boundOnScroll,G.listenerOpts),this.collectionInterval=setInterval(this.reportScroll.bind(this),G.COLLECTION_INTERVAL))}setupBindings(){this.boundOnScroll=this.onScroll.bind(this)}setupExternalMetrics(){G.externalMetrics.scrollPct=(()=>this.totalScrollPct),G.externalMetrics.scrollCount=(()=>this.scrollCount),G.externalMetrics.scrollDistinct=(()=>this.distinctScrollCount),G.externalMetrics.scrollPixels=(()=>this.scrollPixels)}onScroll(t){const e=A.now();this.scrollCount++,e-this.lastScroll>tt.DISTINCT_SCROLL_SECONDS&&this.distinctScrollCount++,this.lastScroll=e;let i=Math.ceil(d.scroll().y),n=Math.abs(this.lastY-i);this.scrollPixels+=n,this.timeline.increment("scroll",n),(0===this.lastYLogged||Math.abs(this.lastYLogged-i)>tt.MIN_SCROLL_Y_CHANGE_FOR_LOG)&&(this.timeline.log(G.LOG_TYPE_SCROLL,e,{y:i}),this.lastYLogged=i),this.intervalScrollPct+=Math.round(n/this.documentHeight*100),this.totalScrollPct+=Math.round(n/this.documentHeight*100),this.lastY=i}reportScroll(){const t=Math.min(this.intervalScrollPct,100);0!==t&&this.timeline.set("scrollpct",t),this.intervalScrollPct=0}analyze(t){const e=A.beaconManager;e.addToBeacon("c.s",G.externalMetrics.scrollCount()),e.addToBeacon("c.s.p",G.externalMetrics.scrollPct()),e.addToBeacon("c.s.y",G.externalMetrics.scrollPixels()),e.addToBeacon("c.s.d",G.externalMetrics.scrollDistinct())}stop(){this.collectionInterval&&(clearInterval(this.collectionInterval),this.collectionInterval=!1),A.eventManager.removeListener(this.win,"scroll",this.boundOnScroll)}onBeacon(){this.totalScrollPct=0,this.scrollCount=0,this.scrollPixels=0,this.distinctScrollCount=0}};var it=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,this.enabled=!0,this.setupBindings(),A.eventManager.addListener(t,"touchstart",this.boundOnTouchStart,G.listenerOpts)}setupBindings(){this.boundOnTouchStart=this.onTouchStart.bind(this)}onTouchStart(t){if(!this.enabled||!t.cancelable)return;const e=A.now();this.interactionMonitor.interact("ts",e,t)}stop(){this.enabled=!1,A.eventManager.removeListener(this.win,"touchstart",this.boundOnTouchStart)}};var nt={VIS_MAP:{visible:0,hidden:1,prerender:2,unloaded:3}};var ot=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,e.register("vis",G.COMPRESS_MODE_SMALL_NUMBERS),this.enabled=!0,A.eventManager.subscribe("visibility_changed",()=>{if(!this.enabled)return;const t=A.now();e.increment("vis"),e.log(G.LOG_TYPE_VIS,t,{s:nt.VIS_MAP[A.visibilityState()]})})}stop(){this.enabled=!1}};var st=class{constructor(t=[]){this.monitors=new Set,this.setupMonitors(t)}setupMonitors(t){for(let e of t)this.monitors.add(e)}isSwitchedOn(t){return!this.isAllMonitorsDisabled()&&(this.isMonitorsEmpty()||this.monitors.has(t))}isMonitorsEmpty(){return 0===this.monitors.size}isAllMonitorsDisabled(){return 1===this.monitors.size&&this.monitors.has(null)}};var rt=class{constructor(t,e,i,n){this.win=t,this.timeline=e,this.afterOnloadMinWait=i,this.monitorSwitch=n||new st,this.monitors=new Map,X.INTERACTION_MIN_WAIT_FOR_BEACON=i,e.register("inter",G.COMPRESS_MODE_SMALL_NUMBERS),e.register("interdly",G.COMPRESS_MODE_SMALL_NUMBERS),this.timeToFirstInteraction=0,this.firstInputDelay=null,this.interactions=0,this.interactionsDelay=0,this.delayedInteractions=0,this.delayedInteractionTime=0,this.enabled=!0,this.beaconStartTime=0,this.beaconEndTime=0,this.beaconMinTimeout=!1,this.beaconMaxTimeout=!1,this.isSpaNav=!1,this.sentTimers=!1,this.setupExternalMetrics(),A.eventManager.subscribe("spa_init",this.onSpaInit.bind(this),null,this),this.setupMonitors()}setupMonitors(){this.monitorSwitch.isSwitchedOn(W)&&this.monitors.set(W,new W(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn(J)&&this.monitors.set(J,new J(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn(ot)&&this.monitors.set(ot,new ot(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn($)&&this.monitors.set($,new $(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn(it)&&this.monitors.set(it,new it(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn(q)&&this.monitors.set(q,new q(A.window,this.timeline,this)),this.monitorSwitch.isSwitchedOn(Z)&&this.monitors.set(Z,new Z(A.window,this.timeline,this)),this.deferUntilDocumentBodyExists(()=>{this.monitorSwitch.isSwitchedOn(et)&&this.monitors.set(et,new et(A.window,this.timeline,this))})}getMonitorByType(t){return this.monitors.get(t)||null}setupExternalMetrics(){G.externalMetrics.interactionDelayed=(()=>this.delayedInteractions),G.externalMetrics.interactionDelayedTime=(()=>Math.ceil(this.delayedInteractionTime)),G.externalMetrics.interactionAvgDelay=(()=>{if(this.interactions>0)return Math.ceil(this.interactionsDelay/this.interactions)}),G.externalMetrics.timeToFirstInteraction=(()=>{if(this.timeToFirstInteraction)return this.timeToFirstInteraction-G.epoch}),G.externalMetrics.firstInputDelay=(()=>{if(null!==this.firstInputDelay)return this.firstInputDelay})}interact(t,e,i){let n=0;e=e||A.now(),this.enabled&&(this.interactions++,this.timeToFirstInteraction||(i&&i.timeStamp?this.timeToFirstInteraction=i.timeStamp+G.epoch:this.timeToFirstInteraction=e),!i||!i.timeStamp||j.isSafari&&A.window!==window||(n=i.timeStamp>14e11?e-i.timeStamp:A.hrNow()-i.timeStamp,this.interactionsDelay+=n,null===this.firstInputDelay&&(this.firstInputDelay=Math.ceil(n)),n>X.INTERACTION_MAX_DELAY&&(this.timeline.increment("interdly"),this.delayedInteractions++,this.delayedInteractionTime+=n)),this.timeline.increment("inter"),!this.isSpaNav&&j.afterOnloadMonitoring&&(this.beaconEndTime=A.now(),this.beaconStartTime||(this.beaconStartTime=this.beaconEndTime,this.beaconMaxTimeout=setTimeout(this.sendInteractionBeacon.bind(this),X.INTERACTION_MAX_WAIT_FOR_BEACON)),this.beaconMinTimeout&&(clearTimeout(this.beaconMinTimeout),this.beaconMinTimeout=!1),this.beaconMinTimeout=setTimeout(this.sendInteractionBeacon.bind(this),X.INTERACTION_MIN_WAIT_FOR_BEACON)))}onSpaInit(){this.isSpaNav=!0,this.clearBeaconTimers()}clearBeaconTimers(){this.beaconMinTimeout&&(clearTimeout(this.beaconMinTimeout),this.beaconMinTimeout=!1),this.beaconMaxTimeout&&(clearTimeout(this.beaconMaxTimeout),this.beaconMaxTimeout=!1)}sendInteractionBeacon(){A.beaconManager.sendBeaconWhenReady({"rt.start":"manual","http.initiator":"interaction","rt.tstart":this.beaconStartTime,"rt.end":this.beaconEndTime},()=>{this.clearBeaconTimers(),A.eventManager.fireEvent("interaction")},this)}analyze(t){const e=G.externalMetrics;A.beaconManager.addToBeacon("c.i.dc",e.interactionDelayed()),A.beaconManager.addToBeacon("c.i.dt",e.interactionDelayedTime()),A.beaconManager.addToBeacon("c.i.a",e.interactionAvgDelay())}stop(){this.enabled=!1}onBeacon(){this.delayedInteractionTime=0,this.delayedInteractions=0,this.interactions=0,this.interactionsDelay=0,this.beaconStartTime=0,this.beaconEndTime=0,this.isSpaNav=!1,this.clearBeaconTimers()}deferUntilDocumentBodyExists(t){if(document.body)return t();setTimeout(()=>{this.deferUntilDocumentBodyExists(t)},100)}};var at=class{constructor(t){if(this.win=t,this.setupExternalMetrics(),t.PerformanceObserver&&t.LayoutShift){this.enabled=!0,this.clsScore=0,this.perfObserver=new t.PerformanceObserver(this.onLayoutShiftObserver.bind(this));try{this.perfObserver.observe({type:"layout-shift",buffered:!0})}catch(t){return}}}setupExternalMetrics(){G.externalMetrics.clsScore=(()=>this.clsScore)}onLayoutShiftObserver(t){if(!this.enabled)return;const e=t.getEntries();for(let t=0;t<e.length;t++)e[t].hadRecentInput||(this.clsScore+=e[t].value)}analyze(t){A.beaconManager.addToBeacon("c.cls",G.externalMetrics.clsScore())}clearClsScore(){this.clsScore=0}stop(){this.enabled=!1,this.perfObserver&&this.perfObserver.disconnect(),this.clearClsScore()}onBeacon(){this.clearClsScore()}};var lt={ATTRIBUTION_TYPES:{unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},CULPRIT_ATTRIBUTION_NAMES:{unknown:0,script:1,layout:2},CULPRIT_TYPES:{unknown:0,iframe:1,embed:2,object:3}};class ct{constructor(t,e){if(this.win=t,this.timeline=e,t.PerformanceObserver&&t.PerformanceLongTaskTiming){this.perfObserver=new t.PerformanceObserver(this.onPerformanceObserver.bind(this));try{this.perfObserver.observe({entryTypes:["longtask"]})}catch(t){return}this.timeline.register("longtask",G.COMPRESS_MODE_SMALL_NUMBERS),this.longTasks=[],this.enabled=!0,this.longTasksTime=0,this.setupExternalMetrics()}}setupExternalMetrics(){G.externalMetrics.longTasksTime=(()=>this.longTasksTime),G.externalMetrics.longTasksCount=(()=>this.longTasks.length)}onPerformanceObserver(t){if(!this.enabled)return;const e=t.getEntries();Array.prototype.push.apply(this.longTasks,e);for(let t=0;t<e.length;t++)this.longTasksTime+=e[t].duration;this.timeline.increment("longtask",e.length)}getTasks(){return this.longTasks}clearTasks(){this.longTasks=[],this.longTasksTime=0}analyze(t){const e=[];if(0!==this.longTasks.length){for(let t=0;t<this.longTasks.length;t++){const i=this.longTasks[t],n={s:Math.round(i.startTime).toString(36),d:Math.ceil(i.duration).toString(36),n:lt.ATTRIBUTION_TYPES[i.name]?lt.ATTRIBUTION_TYPES[i.name]:0},o=[];for(let t=0;t<i.attribution.length;t++){const e=i.attribution[t];if("script"===e.name&&"iframe"===e.containerType&&!e.containerName&&!e.containerId&&!e.containerSrc)continue;let n=e.containerName?e.containerName:void 0;const s=e.containerId?e.containerId:void 0;n===s&&(n=void 0);const r=void 0===s?e.containerSrc:void 0;o.push({a:lt.CULPRIT_ATTRIBUTION_NAMES[e.name]?lt.CULPRIT_ATTRIBUTION_NAMES[e.name]:0,t:lt.CULPRIT_TYPES[e.containerType]?lt.CULPRIT_TYPES[e.containerType]:0,n:n,i:s,s:r})}o.length>0&&(n.a=o),e.push(n)}A.beaconManager.addToBeacon("c.lt.n",G.externalMetrics.longTasksCount(),!0),A.beaconManager.addToBeacon("c.lt.tt",G.externalMetrics.longTasksTime()),A.beaconManager.addToBeacon("c.lt",G.compressJson(e))}}stop(){this.enabled=!1,this.perfObserver.disconnect(),this.clearTasks()}onBeacon(){this.clearTasks()}}ct.CONSTANTS=lt;var dt=ct;var ht=class{constructor(t){this.win=t,t.Performance&&(this.setupExternalMetrics(),this.enabled=!0,this.loadEventDuration=0,this.domContentLoadedEventDuration=0,this.viceLoadingStage=0,this.viceOn=0,A.eventManager.subscribe("page_ready",this.onPageReady.bind(this),null,this))}setupExternalMetrics(){G.externalMetrics.loadEvent=(()=>this.loadEventDuration),G.externalMetrics.domContentLoadedEvent=(()=>this.domContentLoadedEventDuration),G.externalMetrics.viceLoadingStage=(()=>this.viceLoadingStage),G.externalMetrics.viceOn=(()=>this.viceOn)}onPageReady(t){this.enabled&&(this.loadEventDuration=this.calcLoadEventDuration(),this.domContentLoadedEventDuration=this.calcDOMContentLoadEventDuration(),this.viceLoadingStage=this.getViceLoadingStage(),this.viceOn=this.getViceOn())}getPerformanceNavigationTiming(){const t=A.getPerformance();if(t&&t.getEntriesByType)return(t.getEntriesByType("navigation")||[])[0]||null}getViceOn(){const t=document.head.querySelectorAll("script[src$='bolt.js']");let e=-1;for(const i of t)if("viceOn"in i.dataset){e=i.dataset.viceOn;break}return e}getViceLoadingStage(){const{env:t}=A.environment,e="local-debug"===t,i=document.head.querySelectorAll("script[src$='bolt.js']");let n=-1;for(const t of i)if("viceLoadingStage"in t.dataset){n=t.dataset.viceLoadingStage;break}return-1===n&&e&&console.error("Bolt: Error identifying own script tag; not found"),n}calcLoadEventDuration(){const t=this.getPerformanceNavigationTiming();let e=-1;if(t)e=t.duration;else{const{timing:t}=performance;e=t.loadEventEnd-t.navigationStart}return Math.round(e)}calcDOMContentLoadEventDuration(){const t=this.getPerformanceNavigationTiming();let e=-1;if(t)e=t.domContentLoadedEventEnd;else{const{timing:t}=performance;e=t.domContentLoadedEventEnd-t.navigationStart}return Math.round(e)}analyze(t){const e=A.getPerformance();A.beaconManager.addToBeacon("c.ttfb",e.timing.responseStart-e.timing.navigationStart),A.beaconManager.addToBeacon("c.load",G.externalMetrics.loadEvent()),A.beaconManager.addToBeacon("c.dcl",G.externalMetrics.domContentLoadedEvent()),A.beaconManager.addToBeacon("c.vls",G.externalMetrics.viceLoadingStage()),A.beaconManager.addToBeacon("c.vo",G.externalMetrics.viceOn())}clearData(){this.loadEventDuration=0,this.domContentLoadedEventDuration=0}stop(){this.enabled=!1,this.clearData()}onBeacon(){this.clearData()}};var ut={POLLING_INTERVAL:32,ALLOWED_DEVIATION_MS:4,REPORT_INTERVAL:100,POLLS_PER_REPORT:Math.floor(3.125),MAX_MISSED_REPORTS:100};var mt=class{constructor(t,e){this.win=t,this.timeline=e,this.last=A.now(),this.total=0,this.late=0,this.overallTotal=0,this.overallLate=0,this.enabled=!0,this.pollInterval=!1,this.reportInterval=!1,this.setupExternalMetrics(),this.pollInterval=setInterval(this.onPoll.bind(this),ut.POLLING_INTERVAL),this.reportInterval=setInterval(this.onReport.bind(this),ut.REPORT_INTERVAL)}setupExternalMetrics(){G.externalMetrics.pageBusy=(()=>0===this.overallTotal?0:Math.ceil(this.overallLate/this.overallTotal*100))}onPoll(){const t=A.now();let e=t-this.last;if(this.last=t,e>2*ut.POLLING_INTERVAL+ut.ALLOWED_DEVIATION_MS){const t=Math.floor((e-ut.POLLING_INTERVAL)/ut.POLLING_INTERVAL);this.total+=t,this.late+=t,e-=t*ut.POLLING_INTERVAL}this.total++,e>ut.POLLING_INTERVAL+ut.ALLOWED_DEVIATION_MS&&this.late++}onReport(){const t=this.timeline.getTimeBucket();let e=t,i=0;if(0!==this.total){for(;this.total>ut.POLLS_PER_REPORT+1&&i<=ut.MAX_MISSED_REPORTS;)this.timeline.set("busy",100,--e),this.total-=ut.POLLS_PER_REPORT,this.late=Math.max(this.late-ut.POLLS_PER_REPORT,0),this.overallTotal+=ut.POLLS_PER_REPORT,this.overallLate+=ut.POLLS_PER_REPORT,i++;this.overallTotal+=this.total,this.overallLate+=this.late,this.timeline.set("busy",Math.ceil(this.late/this.total*100),t),this.total=0,this.late=0}}analyze(t){A.beaconManager.addToBeacon("c.b",G.externalMetrics.pageBusy())}stop(){this.enabled=!1,this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=!1),this.reportInterval&&(clearInterval(this.reportInterval),this.reportInterval=!1)}onBeacon(){this.overallTotal=0,this.overallLate=0}};var gt={REPORT_INTERVAL:1e3};var pt=class{constructor(t,e,i){this.win=t,this.timeline=e,this.interactionMonitor=i,this.initTimelineRegistration(),this.d=t.document,this.enabled=!0,this.reportInterval=!1,this.battery=null,this.mutationCount=0,this.domLength=0,this.domAllNodes=this.d.getElementsByTagName("*"),this.observer,this.setup()}setup(){this.reportInterval=setInterval(this.reportStats.bind(this),gt.REPORT_INTERVAL),this.win.navigator&&"function"==typeof this.win.navigator.getBattery&&this.win.navigator.getBattery().then(t=>{this.battery=t,this.battery.onlevelchange&&(this.battery.onlevelchange=this.onBatteryLevelChange.bind(this))}),d.isMutationObserverSupported()&&(this.observer=d.addObserver(document,{childList:!0,subtree:!0},null,this.onMutationObserver.bind(this),null,this))}reportStats(){const t=A.getPerformance(),e=t&&t.memory&&t.memory.usedJSHeapSize;if(e&&this.timeline.set("mem",e),this.domLength=this.domAllNodes.length,this.timeline.set("domsz",this.d.documentElement.innerHTML.length),this.timeline.set("domln",this.domLength),this.mutationCount>0){const t=Math.min(Math.round(this.mutationCount/this.domLength*100),100);this.timeline.set("mut",t),this.mutationCount=0}}onBatteryLevelChange(){this.enabled&&this.battery&&this.timeline.set("bat",this.battery.level)}onMutationObserver(t){return t.forEach(t=>{if("childList"!==t.type)return!0;for(let e=0;e<t.addedNodes.length;e++){const i=t.addedNodes[e];this.mutationCount++,this.mutationCount+=i.getElementsByTagName?i.getElementsByTagName("*").length:0}}),!0}stop(){this.enabled=!1,this.reportInterval&&(clearInterval(this.reportInterval),this.reportInterval=!1),this.observer&&this.observer.observer&&(this.observer.observer.disconnect(),this.observer=null),this.battery&&this.battery.onlevelchange&&(this.battery.onlevelchange=null),this.domAllNodes=null}initTimelineRegistration(){this.timeline.register("mem",G.COMPRESS_MODE_LARGE_NUMBERS,!0),this.timeline.register("bat",G.COMPRESS_MODE_PERCENT,!0),this.timeline.register("domsz",G.COMPRESS_MODE_LARGE_NUMBERS,!0),this.timeline.register("domln",G.COMPRESS_MODE_LARGE_NUMBERS,!0),this.timeline.register("mut",G.COMPRESS_MODE_SMALL_NUMBERS)}};var vt=class{static compressBucketLog(t,e,i,n,o){let s,r,a,l,c,d="",h=0;if(!i||!A.Compression)return"";if(0===i.length)return"";if(e)for(void 0===i[n]&&(i[n]=0),s=n+1;s<=o;s++)void 0===i[s]&&(i[s]=i[s-1]);for(s=n;s<=o;s++){if(h="number"!=typeof i[s]||isNaN(i[s])?0:i[s],t===G.COMPRESS_MODE_SMALL_NUMBERS?a=h<=63?G.BASE64_NUMBER.charAt(h):G.LARGE_NUMBER_WRAP+h.toString(36)+G.LARGE_NUMBER_WRAP:t===G.COMPRESS_MODE_LARGE_NUMBERS?a=h.toString(36):t===G.COMPRESS_MODE_PERCENT&&(a=h<99?h<=9?"0"+Math.max(h,0):h:"__"),s+3<=o&&(i[s+1]===h||0===h&&void 0===i[s+1])&&(i[s+2]===h||0===h&&void 0===i[s+2])&&(i[s+3]===h||0===h&&void 0===i[s+3])){for(r=1;s<o&&(i[s+1]===h||0===h&&void 0===i[s+1]);)r++,s++;l="*"+r.toString(36)+"*"+a}else l=a;0===h&&s===o||(t===G.COMPRESS_MODE_LARGE_NUMBERS&&c&&(d+=","),c=!0,d+=l)}return c?t.toString()+d:""}};var Mt={TIME_TO_INTERACTIVE_IDLE_INTERVALS:5,TIME_TO_INTERACTIVE_MIN_FPS:20,TIME_TO_INTERACTIVE_MIN_FPS_PER_INTERVAL:20/(1e3/G.COLLECTION_INTERVAL),TIME_TO_INTERACTIVE_MAX_PAGE_BUSY:50};class ft{constructor(t){this.startTime=t,this.data={},this.dataOptions={},this.dataLog=[],this.tti=0,this.visuallyReady=0,this.heroImagesReady=0,this.setupExternalMetrics()}setupExternalMetrics(){G.externalMetrics.timeToInteractive=(()=>{if(this.tti)return this.tti-G.epoch}),G.externalMetrics.timeToVisuallyReady=(()=>{if(this.visuallyReady)return this.visuallyReady-G.epoch}),G.externalMetrics.timeToHeroImagesReady=(()=>{if(j.ttiWaitForHeroImages&&this.heroImagesReady)return this.heroImagesReady-G.epoch}),G.externalMetrics.timeToFrameworkReady=(()=>{if(j.ttiWaitForFrameworkReady&&j.frameworkReady)return j.frameworkReady-G.epoch}),G.externalMetrics.log=(()=>this.dataLog)}stop(){this.data={},this.dataLog=[]}onBeacon(){for(let t in this.data)this.data[t]&&(this.data[t]=[]);this.dataLog=[]}register(t,e,i){this.data[t]||(this.data[t]=[]),this.dataOptions[t]={compressMode:e||G.COMPRESS_MODE_SMALL_NUMBERS,backfillLast:i}}getTimeBucket(){return Math.floor((A.now()-this.startTime)/G.COLLECTION_INTERVAL)}set(t,e,i){void 0===i&&(i=this.getTimeBucket()),this.data[t]&&(this.data[t][i]=e)}increment(t,e,i){void 0===i&&(i=this.getTimeBucket()),void 0===e&&(e=1),this.data[t]&&(this.data[t][i]||(this.data[t][i]=0),this.data[t][i]+=e)}log(t,e,i){void 0===e&&(e=this.getTimeBucket()),this.dataLog.push({type:t,val:i,time:e}),this.dataLog.length>j.logMaxEntries&&Array.prototype.splice.call(this.dataLog,0,this.dataLog.length-j.logMaxEntries)}getStats(t,e){let i,n=0,o=0,s=1/0,r=0,a=Math.floor((e-this.startTime)/G.COLLECTION_INTERVAL);if(!this.data[t])return 0;for(let e in this.data[t])(e=parseInt(e,10))>=a&&this.data[t][e]&&(n++,o+=i=this.data[t][e],s=Math.min(s,i),r=Math.max(r,i));return{total:o,count:n,min:s,max:r}}determineImageLoadTime(t){let e,i,n,o,s,r,a=0;const l=G.p;if(!A.window||!A.window.document||"function"!=typeof A.window.document.querySelectorAll)return 0;if(!l||"function"!=typeof l.getEntriesByType)return 0;if(e=t+", "+t+" * img, "+t+" * image",(i=A.window.document.querySelectorAll(e))&&i.length)for(n=0;n<i.length;n++){if(!(s=i[n].currentSrc||i[n].src||"function"==typeof i[n].getAttribute&&i[n].getAttribute("xlink:href"))&&"function"==typeof A.window.getComputedStyle){const t=A.window.getComputedStyle(i[n])&&A.window.getComputedStyle(i[n]).getPropertyValue("background");if(t){const e=t.match(/url\(["']?([^"']*)["']?\)/);e&&e.length>0&&(s=e[1])}}if(s&&(r=l.getEntriesByName(s))&&r.length)for(o=0;o<r.length;o++)a=Math.max(a,r[o].responseEnd)}return a?Math.floor(a+G.epoch):0}determineVisuallyReady(){const t=G.p;let e=0;if(j.ttiWaitForFrameworkReady){if(!j.frameworkReady)return;e=j.frameworkReady}const i=A.pluginManager.getPlugin("paintTiming");if(i&&i.isSupported()&&t&&t.timeOrigin){let n=i.getTimingFor("largest-contentful-paint");n||(n=i.getTimingFor("first-contentful-paint")),n||(n=i.getTimingFor("first-paint")),n&&(e=Math.max(e,Math.round(n+t.timeOrigin)))}else if(t&&t.timing&&t.timing.msFirstPaint)e=Math.max(e,t.timing.msFirstPaint);else if(A.window&&A.window.chrome&&"function"==typeof A.window.chrome.loadTimes){const t=A.window.chrome.loadTimes();t&&t.firstPaintTime&&(e=Math.max(e,1e3*t.firstPaintTime))}return t&&t.timing&&t.timing.domContentLoadedEventEnd&&(e=Math.max(e,t.timing.domContentLoadedEventEnd)),j.ttiWaitForHeroImages&&(this.heroImagesReady=this.determineImageLoadTime(j.ttiWaitForHeroImages),this.heroImagesReady&&(e=Math.max(e,this.heroImagesReady))),e}addCompressedLogToBeacon(){let t="";for(let e=0;e<this.dataLog.length;e++){const i=this.dataLog[e];0!==e&&(t+="|"),t+=i.type,t+=Math.round(i.time-G.epoch).toString(36);for(let e in i.val)i.val[e]&&(t+=","+e,"number"==typeof i.val[e]?t+=i.val[e].toString(36):t+=i.val[e])}""!==t&&A.beaconManager.addToBeacon("c.l",t)}getCompressedBucketLogFor(t,e){return vt.compressBucketLog(this.dataOptions[t].compressMode,this.dataOptions[t].backfillLast,this.data[t],0!==e?Math.floor((e-this.startTime)/G.COLLECTION_INTERVAL):0,this.getTimeBucket())}addCompressedTimelineToBeacon(t){for(let e in this.data)if(this.data[e]){const i=this.getCompressedBucketLogFor(e,t);""!==i&&A.beaconManager.addToBeacon("c.t."+e,i)}}analyze(t){const e=this.getTimeBucket();let i=0;if(j.sendLog&&void 0!==t&&this.addCompressedLogToBeacon(),j.sendTimeline&&void 0!==t&&this.addCompressedTimelineToBeacon(t),this.tti)return;if(!this.visuallyReady&&(this.visuallyReady=this.determineVisuallyReady(),!this.visuallyReady))return;const n=A.beaconManager;if(n.addToBeacon("c.tti.vr",G.externalMetrics.timeToVisuallyReady()),n.addToBeacon("c.tti.fr",G.externalMetrics.timeToFrameworkReady()),n.addToBeacon("c.tti.hi",G.externalMetrics.timeToHeroImagesReady()),this.data.longtask||this.data.fps||this.data.busy){for(let t=Math.floor((this.visuallyReady-this.startTime)/G.COLLECTION_INTERVAL);t<=e;t++)if(this.data.longtask&&this.data.longtask[t])i=0;else if(this.data.fps&&(!this.data.fps[t]||this.data.fps[t]<Mt.TIME_TO_INTERACTIVE_MIN_FPS_PER_INTERVAL))i=0;else if(this.data.busy&&this.data.busy[t]>Mt.TIME_TO_INTERACTIVE_MAX_PAGE_BUSY)i=0;else if(this.data.interdly&&this.data.interdly[t])i=0;else if(++i>=Mt.TIME_TO_INTERACTIVE_IDLE_INTERVALS){this.tti=this.startTime+(t-Mt.TIME_TO_INTERACTIVE_IDLE_INTERVALS)*G.COLLECTION_INTERVAL,this.tti=Math.max(this.tti,this.visuallyReady);break}this.tti>0&&n.addToBeacon("c.tti",G.externalMetrics.timeToInteractive())}}}ft.CONSTANTS=Mt;var bt=ft;class Tt{constructor(t,e){this.monitorSwitch=t||new st,this.interactionMonitorSwitch=e||new st,j.timeline=new bt(A.now()),A.window&&this.setupMonitors(),this.addVariables(),this.setupSubscriptions()}isComplete(){return j.complete}addVariables(){const t=A.variableManager;t.addVar("c.e",G.epoch.toString(36)),t.addVar("c.tti.m",j.ttiMethod)}setupSubscriptions(){const t=A.eventManager;t.subscribe("before_beacon",j.onBeforeBeacon,null,j),t.subscribe("beacon",j.onBeacon,null,j),t.subscribe("page_ready",j.onPageReady,null,j),t.subscribe("xhr_load",j.onXhrLoad,null,j)}setupMonitors(){this.shouldMonitorLongTasks()&&this.setupLongTaskMonitor(),this.shouldMonitorFps()&&this.setupFpsMonitor(),this.shouldMonitorPageBusy()&&this.setupPageBusyMonitor(),this.shouldMonitorInteractions()&&this.setupInteractionMonitors(),this.shouldMonitorStats()&&this.setupStatsMonitor(),this.shouldMonitorLayoutShifts()&&this.setupLayoutShiftMonitor(),this.shouldMonitorPageAndDOMMonitor()&&this.setupPageAndDOMMonitor()}shouldMonitorLongTasks(){return this.monitorSwitch.isSwitchedOn(dt)&&j.monitorLongTasks&&A.window.PerformanceObserver&&A.window.PerformanceLongTaskTiming}shouldMonitorFps(){return this.monitorSwitch.isSwitchedOn(H)&&j.monitorFrameRate&&"function"==typeof A.window.requestAnimationFrame}shouldMonitorPageBusy(){return this.monitorSwitch.isSwitchedOn(mt)&&j.monitorPageBusy&&(!A.window.PerformanceObserver||!A.window.PerformanceLongTaskTiming||!j.monitorLongTasks)}shouldMonitorInteractions(){return this.monitorSwitch.isSwitchedOn(rt)&&j.monitorInteractions}shouldMonitorStats(){return this.monitorSwitch.isSwitchedOn(pt)&&j.monitorStats}shouldMonitorLayoutShifts(){return this.monitorSwitch.isSwitchedOn(at)&&j.monitorLayoutShifts&&A.window.PerformanceObserver}shouldMonitorPageAndDOMMonitor(){return this.monitorSwitch.isSwitchedOn(ht)&&j.monitorPageAndDOMMonitor}setupPageBusyMonitor(){j.pageBusyMonitor=new mt(A.window,j.timeline),j.ttiMethod||(j.ttiMethod="b")}setupFpsMonitor(){j.frameRateMonitor=new H(A.window,j.timeline),j.ttiMethod||(j.ttiMethod="raf")}setupLongTaskMonitor(){j.longTaskMonitor=new dt(A.window,j.timeline),j.ttiMethod="lt"}setupLayoutShiftMonitor(){j.layoutShiftMonitor=new at(A.window)}setupPageAndDOMMonitor(){j.pageAndDOMMonitor=new ht(A.window)}setupStatsMonitor(){j.statsMonitor=new pt(A.window,j.timeline,j.interactionMonitor)}setupInteractionMonitors(){const t=new rt(A.window,j.timeline,j.afterOnloadMinWait,this.interactionMonitorSwitch);j.interactionMonitor=t,j.keyMonitor=t.getMonitorByType(W),j.mouseMonitor=t.getMonitorByType(J),j.visibilityMonitor=t.getMonitorByType(ot),j.orientationMonitor=t.getMonitorByType($),j.touchStartMonitor=t.getMonitorByType(it),j.mouseDownMonitor=t.getMonitorByType(q),j.pointerDownMonitor=t.getMonitorByType(Z),this.deferUntilDocumentBodyExists(()=>{j.scrollMonitor=t.getMonitorByType(et)})}deferUntilDocumentBodyExists(t){if(document.body)return t();setTimeout(()=>{this.deferUntilDocumentBodyExists(t)},100)}}Tt.CONSTANTS=G;var wt=Tt;var Et={PAINT_TIMING_MAP:{"first-paint":"fp","first-contentful-paint":"fcp","largest-contentful-paint":"lcp"}};const yt={initialized:!1,complete:!1,supported:null,timingCache:{},observer:null,externalMetrics:{},done:function(t,e){let i,n,o;if(yt.complete)return yt;if("load"!==e&&(!t||"spa_hard"!==t.initiator))return yt.complete=!0,yt;if((i=A.getPerformance())&&"function"==typeof i.getEntriesByType){if((n=i.getEntriesByType("paint"))&&n.length){for(o=0;o<n.length;o++)yt.timingCache[n[o].name]=n[o].startTime,Et.PAINT_TIMING_MAP[n[o].name]&&A.variableManager.addVar("pt."+Et.PAINT_TIMING_MAP[n[o].name],Math.floor(n[o].startTime),!0);yt.complete=!0,A.beaconManager.sendBeacon()}}else yt.complete=!0},onObserver:function(t){const e=t.getEntries();if(0===e.length)return;const i=e[e.length-1],n=i.renderTime||i.loadTime;yt.timingCache[i.entryType]=n,A.variableManager.addVar("pt.lcp",Math.floor(n),!0),yt.externalMetrics.lcp=function(){return Math.floor(n)}}};var St=yt;class Ot{constructor(){if(this.isSupported()||(St.complete=!0,St.initialized=!0),St.complete||"hidden"!==A.visibilityState()||(A.variableManager.addVar("pt.hid",1,!0),St.complete=!0),!St.initialized){const t=A.eventManager;t.subscribe("page_ready",St.done,"load",St),t.subscribe("xhr_load",St.done,"xhr",St),t.subscribe("before_unload",St.done,null,St),"function"==typeof A.window.PerformanceObserver&&"function"==typeof window.LargestContentfulPaint&&(St.observer=new A.window.PerformanceObserver(St.onObserver),St.observer.observe({type:"largest-contentful-paint",buffered:!0})),St.initialized=!0}return this}isSupported(){if(null!==St.supported)return St.supported;const t=A.getPerformance();return St.supported=t&&void 0!==window.PerformancePaintTiming&&"function"==typeof t.getEntriesByType,St.supported}isComplete(){return!0}isEnabled(){return St.initialized&&this.isSupported()}getTimingFor(t){if(St.timingCache[t])return St.timingCache[t];if(!this.isSupported())return;const e=A.getPerformance();if(!e||"function"!=typeof e.getEntriesByType)return;const i=e.getEntriesByType("paint");if(i&&i.length)for(let e=0;e<i.length;e++)if(i[e].name===t)return St.timingCache[t]=i[e].startTime,St.timingCache[t]}}Ot.CONSTANTS=Et;var Lt=Ot;class _t{constructor(){this.isSupported()||(k.initialized=!0),k.initialized||A.eventManager.subscribe("before_beacon",k.onBeforeBeacon,null,k);try{k.observerEvent=new PerformanceObserver(k.onEventTiming),k.observerEvent.observe({type:["event"],buffered:!0}),k.observerFirstInput=new PerformanceObserver(k.onFirstInput),k.observerFirstInput.observe({type:["first-input"],buffered:!0})}catch(t){k.supported=!1}k.initialized=!0,this.metrics=F}isComplete(){return!0}isEnabled(){return k.initialized&&this.isSupported()}isSupported(){if(null!==k.supported)return k.supported;const t=A.getPerformance();return k.supported=t&&void 0!==window.PerformanceEventTiming&&"function"==typeof window.PerformanceObserver,k.supported}stop(){k.observerEvent&&(k.observerEvent.disconnect(),k.observerEvent=null),k.observerFirstInput&&(k.observerFirstInput.disconnect(),k.observerFirstInput=null)}}_t.CONSTANTS=x;var Bt=_t;const It=new st([rt,dt,at,ht]),Pt=new st([W]),Rt={includeDataByKeys:Object.assign(Object.assign({},{"pt.lcp":"lcp","et.fid":"fid","pt.fcp":"fcp","c.cls":"cls","c.tti":"tti","c.load":"load","c.dcl":"dcl","c.vls":"vls","c.vo":"vo","c.ttfb":"ttfb"}),{v:"ver"})};A.setup(),A.pluginManager.registerPlugin("continuity",new wt(It,Pt)),A.pluginManager.registerPlugin("paintTiming",new Lt),A.pluginManager.registerPlugin("eventTiming",new Bt),A.init({beaconFilterData:Rt,environment:n})}]);